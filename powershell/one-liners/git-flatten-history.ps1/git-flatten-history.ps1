$main_branch = (git symbolic-ref --short refs/remotes/origin/HEAD) -replace 'origin/', ''; git checkout --orphan temp-flatten; git add -A; git commit -m "git history flattened"; git branch -D $main_branch; git branch -m $main_branch; git push -f origin $main_branch; Write-Host "`nâœ… Repository history flattened successfully."